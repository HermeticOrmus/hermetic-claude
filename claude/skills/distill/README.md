# Distill: The Alchemist's Art

> *"In the Alembic, all things are transformed."*

Transform ephemeral Claude Code session operations into permanent, reusable tinctures through the sacred art of distillation.

## The Laboratory

```
Prima Materia (Session)
        │
        │  "Alchemy is the science of God
        │   and Reality is programmable"
        ▼
   ┌─────────┐
   │ ALEMBIC │  ← Distillation vessel (the agent)
   │  ~~~    │
   │   ~     │    D: Session → Artifacts
   └────┬────┘
        │
    ┌───┴───┐
    │       │
    ▼       ▼
 ┌─────┐ ┌─────┐ ┌─────┐
 │Cmd  │ │Skill│ │Agent│
 │1/φ  │ │ φ   │ │ φ²  │
 └─────┘ └─────┘ └─────┘
```

## The Fourfold Foundation

| Foundation | Domain | Key Insight |
|------------|--------|-------------|
| **Category Theory** | Structure | Functors preserve composition |
| **Information Theory** | Compression | Reduce entropy, preserve essence |
| **Quantum Mechanics** | Perception | Observe sources, perceive connections |
| **Hermetic Alchemy** | Philosophy | "Solve et Coagula" - dissolve and coagulate |

### The Golden Ratio (φ = 1.618...)

```
Complexity = (Operations × Decisions × Iterations) / 5

< 0.618 (1/φ)  → Command (Simple Extract)
0.618 - 1.618  → Skill (Tincture)
> 1.618 (φ)    → Agent (Potent Elixir)
```

### Quantum Perception

```
|Session⟩ = Σ αᵢ|Patternᵢ⟩   (Superposition)

Distillation collapses to specific tincture.
Intention determines outcome.

Entanglement reveals non-local connections.
Source tracing finds the origin point.
```

## Components

| Component | Path | Purpose |
|-----------|------|---------|
| **Skill** | `SKILL.md` | Reference documentation for distillation |
| **Command** | `~/.claude/commands/distill.md` | Quick invocation via `/distill` |
| **Agent** | `~/.claude/agents/alembic/agent.md` | Autonomous distillation for complex sessions |
| **Laboratory** | `~/.claude/skills/alchemists-laboratory/` | Full developmental framework |

## Quick Start

### Via Command (Recommended)

```bash
# Auto-detect tincture type based on session complexity
/distill "capture this workflow"

# Force specific output
/distill @output:skill "capture debugging workflow"
/distill @output:command @name:quick-deploy "capture deploy steps"
/distill @output:agent "capture research process"
```

### Via Agent (Complex Sessions)

For sessions with multiple decision points, iterations, and complex patterns:

```
Task(subagent_type="alembic",
     prompt="Distill the current session operations into reusable tinctures")
```

## The Four Stages of the Opus

```
NIGREDO  → ALBEDO  → CITRINITAS → RUBEDO
(Black)    (White)    (Yellow)     (Red)

W.extract  F.map     φ.classify   Generate
Dissolve   Purify    Classify     Coagulate
Session    Essence   Potency      Tincture
```

| Stage | Operation | Categorical | Quantum |
|-------|-----------|-------------|---------|
| **NIGREDO** | Dissolution | W.extract | Superposition revealed |
| **ALBEDO** | Purification | F.map | Source traced |
| **CITRINITAS** | Classification | φ.classify | Measurement performed |
| **RUBEDO** | Coagulation | Generate | Collapse to tincture |

## Mathematical Foundation

### Distillation Functor
```
D: Session → Artifacts

Preserves:
  D(id) = id
  D(g ∘ f) = D(g) ∘ D(f)
```

### Quality Balance
```
Quality = φ⁻¹ × Specificity + φ × Generality

Optimal when: Specificity × Generality = 1
```

### Information Laws
```
H(Tincture) < H(Session)           (Entropy reduced)
I(Session; Tincture) ≥ 0.618×H(S)  (Information preserved)
```

### Quantum Operations
```
|Session⟩ = Σ αᵢ|Patternᵢ⟩         (Superposition)
⟨A, B⟩ ≠ 0 for d(A,B) >> 0         (Entanglement)
U†(t)|ψ⟩ → |source⟩                (Source tracing)
```

## Example Distillations

### Debug Session → Skill (φ range)

```
Session: Read error → Grep pattern → Identify → Fix → Validate
Score: 5 ops × 2 decisions × 1 iter / 5 = 2.0
Result: debugging-workflow/SKILL.md
```

### Deploy Flow → Command (1/φ range)

```
Session: Build → Test → Deploy
Score: 3 ops × 1 decision × 1 iter / 5 = 0.6
Result: deploy-vercel.md
```

### Research Process → Agent (φ² range)

```
Session: Search → Analyze → Dive deep → Synthesize → Iterate → Report
Score: 7 ops × 3 decisions × 2 iters / 5 = 8.4
Result: research-synthesizer/agent.md
```

## The Seven Hermetic Principles

| Principle | Distillation Application |
|-----------|-------------------------|
| **Mentalism** | Clarify intention before extracting |
| **Correspondence** | Tincture mirrors session structure |
| **Vibration** | Complexity determines tincture type |
| **Polarity** | Balance specificity ↔ generality at φ |
| **Rhythm** | Preserve natural sequence of operations |
| **Cause & Effect** | Every operation has purpose |
| **Gender** | Analysis + Synthesis = Tincture |

## Output Format

```yaml
DISTILLATION_COMPLETE:
  prima_materia:
    operations: N
    decisions: M
    iterations: K
    complexity_score: X.XX
    phi_category: "[1/φ | φ | φ²]"

  information_metrics:
    session_entropy: H(S)
    tincture_entropy: H(T)
    compression_ratio: H(T)/H(S)

  quantum_analysis:
    entangled_patterns: [list]
    source_traced: [origin]
    collapse_type: [Command|Skill|Agent]

  tinctures:
    - type: "[Command | Skill | Agent]"
      name: "[name]"
      path: "[full path]"
      potency: [0-1]
```

## The Alchemist's Creed

```
"Solve et Coagula"

From the prima materia of the session,
Through the fire of analysis,
Emerges the gold of reusable artifacts.

What enters as chaos emerges as cosmos.
What enters as ephemeral emerges as eternal.
What enters as specific emerges as universal.
```

## Version

- **Version**: 2.0.0
- **Foundation**: Category Theory + Information Theory + Quantum Mechanics + Hermetic Alchemy + Golden Ratio
- **Created**: Distilled from session analysis patterns

---

*"Alchemy is the science of God and Reality is programmable. This Laboratory allows us to program the new world efficiently."*
